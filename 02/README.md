# Домашнее задание #02 (функции, декораторы)

## Формулировка задачи

---
### 1. Написать функцию, которая в качестве аргументов принимает строку json, список полей, которые необходимо обработать, список имён, которые нужно найти и функцию-обработчика имени, который срабатывает, когда в каком-либо поле было найдено ключевое имя.

Функция, должна принимать строку, в которой содержится json, и произвести парсинг этого json.
Упростим немного и представим, что json представляет из себя только коллекцию ключей-значений.
Причём ключами и значениями являются только строки.

```py
def parse_json(json_str: str, required_fields=None, keywords=None, keyword_callback)
```

Например, представим, что json_str = '{"key1": "Word1 word2", "key2": "word2 word3"}', а required_fields = ["key1"], keywords = ["word2"]. Тогда keyword_callback будет вызвана только для слова 'word2' для ключа 'key1'.

Распарсить json можно так:
```py
import json

...
json_doc = json.loads(json_str)

```

Можно использовать ещё ujson, но его предварительно нужно установить с помощью pip.

### 2. Написать декоратор, который выводит среднее время выполнения последних k вызовов при каждом вызове функции

```py
@mean(10)
def foo(arg1):
    pass

@mean(2)
def boo(arg1):
    pass

for _ in range(100):
    foo("Walter")
```

### Использовать mock-объект при тестировании
Использовать mock-объект, например, keyword_callback и проверить, что заглушка вызывалась n число раз.

### Узнать степень покрытия тестами с помощью библиотеки coverage

### Использовать flake8 и pylint для проверки кода

### Использовать factory boy (опционально!!!)
Для генерации данных и ключевых слов, можно использовать factory boy (см. файл factory_boy_example.py).


---

## Решение

---

### Описание решения

Задание 1 реализовано в файле `parse_json.py`. Тесты к нему находятся в файле `test/test_parse_json.py`.

Задание 2 реализовано в файле `text_timer.py`. Тесты к нему находятся в файле `test/test_timer.py`.

Перед проверкой задания необходимо установить все используемые модули:
```bash
pip install -r requirements.txt
```

Исходная конфигурация pylint была изменена. Необходимо подключить новый конфигурационный файл:
```bash
pylint --rcfile .pylintrc
```

### Запуск тестов

Для запуска тестов для обоих заданий необходимо выполнить следующую команду:
```bash
python3 -m unittest discover 02/
```

### Отчет линтеров

1. **Pylint**
```bash
pylint 02/

-------------------------------------------------------------------
Your code has been rated at 10.00/10 (previous run: 9.72/10, +0.28)


```

2. **Flake8**
```bash
flake8 02/

02/test/test_parse_json.py:6:1: E402 module level import not at top of file
02/test/test_timer.py:5:1: E402 module level import not at top of file
```

Пояснение: так как по требованиям к оформлению ДЗ папки должны называться 01, 02 и т.д. (то есть они не являются валидными идентификаторами Python), нет возможности импортировать их напрямую в виде `import 02.timer`. Поэтому перед импортом в PATH добавляется родительская директория, что разумеется противоречит PEP8

### Отчет coverage
```bash
coverage run --source=02/ -m unittest discover 02/
coverage report

Name                         Stmts   Miss  Cover
------------------------------------------------
02/parse_json.py                13      0   100%
02/test/__init__.py              0      0   100%
02/test/test_parse_json.py      53      0   100%
02/test/test_timer.py           24      0   100%
02/timer.py                     16      0   100%
------------------------------------------------
TOTAL                          106      0   100%

```